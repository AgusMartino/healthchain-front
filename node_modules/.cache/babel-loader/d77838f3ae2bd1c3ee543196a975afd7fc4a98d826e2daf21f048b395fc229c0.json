{"ast":null,"code":"import { createStore } from 'vuex';\nimport auth0 from 'auth0-js';\nexport default createStore({\n  state: {\n    userIsAuthorized: true,\n    auth0: new auth0.WebAuth({\n      domain: process.env.VUE_APP_Healtchain_AUTH0_DOMAIN,\n      clientID: process.env.VUE_APP_Healtchain_AUTH0_CLIENTID,\n      redirectUri: process.env.VUE_APP_DOMAINURL + '/callback',\n      responseType: process.env.VUE_APP_AUTH0_CONFIG_RESPONSETYPE,\n      scope: process.env.VUE_APP_AUTH0_CONFIG_SCOPE\n    })\n  },\n  getters: {},\n  mutations: {\n    setUserIsAuthenticated(state, replacement) {\n      state.userIsAuthorized = replacement;\n    }\n  },\n  actions: {\n    auth0Login(context) {\n      context.state.auth0.authorize();\n    },\n    auth0HandleAuthentication(context) {\n      context.state.auth0.parseHash((err, authResult) => {\n        if (authResult && authResult.accessToken && authResult.idToken) {\n          let expiresAt = JSON.stringify(authResult.expiresIn * 1000 + new Date().getTime());\n          // save the tokens locally\n          localStorage.setItem('access_token', authResult.accessToken);\n          localStorage.setItem('id_token', authResult.idToken);\n          localStorage.setItem('expires_at', expiresAt);\n          router.replace('/members');\n        } else if (err) {\n          alert('login failed. Error #KJN838');\n          router.replace('/login');\n          console.log(err);\n        }\n      });\n    }\n  },\n  modules: {}\n});","map":{"version":3,"names":["createStore","auth0","state","userIsAuthorized","WebAuth","domain","process","env","VUE_APP_Healtchain_AUTH0_DOMAIN","clientID","VUE_APP_Healtchain_AUTH0_CLIENTID","redirectUri","VUE_APP_DOMAINURL","responseType","VUE_APP_AUTH0_CONFIG_RESPONSETYPE","scope","VUE_APP_AUTH0_CONFIG_SCOPE","getters","mutations","setUserIsAuthenticated","replacement","actions","auth0Login","context","authorize","auth0HandleAuthentication","parseHash","err","authResult","accessToken","idToken","expiresAt","JSON","stringify","expiresIn","Date","getTime","localStorage","setItem","router","replace","alert","console","log","modules"],"sources":["R:/Agus/Facultad/TFI 5to/healthchain-front/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\r\nimport auth0 from 'auth0-js'\r\n\r\nexport default createStore({\r\n  state: {\r\n    userIsAuthorized:true,\r\n    auth0: new auth0.WebAuth({\r\n      domain: process.env.VUE_APP_Healtchain_AUTH0_DOMAIN, \r\n      clientID: process.env.VUE_APP_Healtchain_AUTH0_CLIENTID,\r\n      redirectUri: process.env.VUE_APP_DOMAINURL + '/callback',  \r\n      responseType: process.env.VUE_APP_AUTH0_CONFIG_RESPONSETYPE,\r\n      scope: process.env.VUE_APP_AUTH0_CONFIG_SCOPE})\r\n  },\r\n  getters: {\r\n  },\r\n  mutations: {\r\n    setUserIsAuthenticated(state, replacement){\r\n      state.userIsAuthorized = replacement;\r\n    }\r\n  },\r\n  actions: {\r\n    auth0Login(context){\r\n      context.state.auth0.authorize()\r\n    },\r\n    auth0HandleAuthentication (context) {\r\n      context.state.auth0.parseHash((err, authResult) => {\r\n        if (authResult && authResult.accessToken && authResult.idToken) {\r\n          let expiresAt = JSON.stringify(\r\n            authResult.expiresIn * 1000 + new Date().getTime()\r\n          )\r\n          // save the tokens locally\r\n          localStorage.setItem('access_token', authResult.accessToken);\r\n          localStorage.setItem('id_token', authResult.idToken);\r\n          localStorage.setItem('expires_at', expiresAt);  \r\n\r\n          router.replace('/members');\r\n        } \r\n        else if (err) {\r\n          alert('login failed. Error #KJN838');\r\n          router.replace('/login');\r\n          console.log(err);\r\n        }\r\n      })\r\n    },\r\n  },\r\n  modules: {\r\n  }\r\n})\r\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,MAAM;AAClC,OAAOC,KAAK,MAAM,UAAU;AAE5B,eAAeD,WAAW,CAAC;EACzBE,KAAK,EAAE;IACLC,gBAAgB,EAAC,IAAI;IACrBF,KAAK,EAAE,IAAIA,KAAK,CAACG,OAAO,CAAC;MACvBC,MAAM,EAAEC,OAAO,CAACC,GAAG,CAACC,+BAA+B;MACnDC,QAAQ,EAAEH,OAAO,CAACC,GAAG,CAACG,iCAAiC;MACvDC,WAAW,EAAEL,OAAO,CAACC,GAAG,CAACK,iBAAiB,GAAG,WAAW;MACxDC,YAAY,EAAEP,OAAO,CAACC,GAAG,CAACO,iCAAiC;MAC3DC,KAAK,EAAET,OAAO,CAACC,GAAG,CAACS;IAA0B,CAAC;EAClD,CAAC;EACDC,OAAO,EAAE,CACT,CAAC;EACDC,SAAS,EAAE;IACTC,sBAAsBA,CAACjB,KAAK,EAAEkB,WAAW,EAAC;MACxClB,KAAK,CAACC,gBAAgB,GAAGiB,WAAW;IACtC;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,UAAUA,CAACC,OAAO,EAAC;MACjBA,OAAO,CAACrB,KAAK,CAACD,KAAK,CAACuB,SAAS,CAAC,CAAC;IACjC,CAAC;IACDC,yBAAyBA,CAAEF,OAAO,EAAE;MAClCA,OAAO,CAACrB,KAAK,CAACD,KAAK,CAACyB,SAAS,CAAC,CAACC,GAAG,EAAEC,UAAU,KAAK;QACjD,IAAIA,UAAU,IAAIA,UAAU,CAACC,WAAW,IAAID,UAAU,CAACE,OAAO,EAAE;UAC9D,IAAIC,SAAS,GAAGC,IAAI,CAACC,SAAS,CAC5BL,UAAU,CAACM,SAAS,GAAG,IAAI,GAAG,IAAIC,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CACnD,CAAC;UACD;UACAC,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEV,UAAU,CAACC,WAAW,CAAC;UAC5DQ,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEV,UAAU,CAACE,OAAO,CAAC;UACpDO,YAAY,CAACC,OAAO,CAAC,YAAY,EAAEP,SAAS,CAAC;UAE7CQ,MAAM,CAACC,OAAO,CAAC,UAAU,CAAC;QAC5B,CAAC,MACI,IAAIb,GAAG,EAAE;UACZc,KAAK,CAAC,6BAA6B,CAAC;UACpCF,MAAM,CAACC,OAAO,CAAC,QAAQ,CAAC;UACxBE,OAAO,CAACC,GAAG,CAAChB,GAAG,CAAC;QAClB;MACF,CAAC,CAAC;IACJ;EACF,CAAC;EACDiB,OAAO,EAAE,CACT;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}