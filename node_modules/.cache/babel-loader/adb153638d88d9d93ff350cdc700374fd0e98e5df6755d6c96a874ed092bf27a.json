{"ast":null,"code":"import \"core-js/modules/web.dom-exception.stack.js\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      validacionCuit: false,\n      cuit: null,\n      Rolselect: null,\n      jsonEmpresa: {\n        nombre_empresa: \"\",\n        direccion_empresa: \"\"\n      },\n      jsonRol: [{\n        id: '1',\n        Rol: 'Empleado Administrador'\n      }, {\n        id: '2',\n        Rol: 'Empleado Financiero'\n      }, {\n        id: '3',\n        Rol: 'Empleado Monitor'\n      }],\n      jsonSolicitud: {\n        cuit_empresa: null,\n        id_usuario: null,\n        tipo_Solicitud: {\n          id: \"2\"\n        },\n        descripcion: null,\n        estado: \"1\"\n      }\n    };\n  },\n  methods: {\n    Solicitud() {\n      const status = this.RegisterEmployee();\n      if (status == 200) {\n        const userdata = this.GetUser();\n        this.jsonSolicitud.id_usuario = userdata.id_usuario.toString();\n        this.jsonSolicitud.cuit_empresa = this.cuit.toString();\n        axios.post(\"https://localhost:7274/api/Solicitud/RegisterSolicitud\", this.jsonSolicitud).then(response => {\n          if (response.status == 200) alert(\"Solicitud enviado con exito\");\n        }).catch(err => {\n          alert(err.data);\n        });\n      }\n    },\n    RegisterEmployee() {\n      const userdata = parseJwt();\n      const JsonRegister = {\n        user: userdata.email.toString(),\n        name: userdata.given_name.toString(),\n        lastname: userdata.family_name.toString(),\n        user_type: \"2\"\n      };\n      axios.post(\"https://localhost:7151/api/User/RegisterUser\", JsonRegister).then(response => {\n        return response.status;\n      }).catch(err => {\n        alert(err.data);\n      });\n    },\n    GetUser() {\n      const jsonPayload = decodeToken();\n      const userData = [];\n      axios.get(\"https://localhost:7151/api/User/ValidateUser/\" + jsonPayload.email.toString()).then(response => {\n        this.userData = response.data;\n      }).catch(err => {\n        alert(err.data);\n      });\n      return userData;\n    },\n    GetEmpresa() {\n      val = false;\n      if (this.cuit == null) {\n        alert(\"Debe completar el cuit de la empresa a buscar\");\n      } else {\n        axios.get(\"https://localhost:7227/api/Empresa/GetOneEmpresa/\" + this.cuit.toString()).then(response => {\n          this.jsonEmpresa = response.data;\n          if (response.status == 200) {\n            val = true;\n          } else {\n            val = false;\n          }\n        }).catch(err => {\n          alert(err.data);\n          val = false;\n        }).finally(data => {\n          this.validacionCuit = val;\n        });\n      }\n    },\n    setSelected(e) {\n      console.log(e);\n      this.Rol = e;\n    },\n    parseJwt() {\n      const token = localStorage.getItem('id_token');\n      const base64Url = token.split('.')[1];\n      const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n      const jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function (c) {\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n      }).join(''));\n      return JSON.parse(jsonPayload);\n    }\n  }\n};","map":{"version":3,"names":["axios","data","validacionCuit","cuit","Rolselect","jsonEmpresa","nombre_empresa","direccion_empresa","jsonRol","id","Rol","jsonSolicitud","cuit_empresa","id_usuario","tipo_Solicitud","descripcion","estado","methods","Solicitud","status","RegisterEmployee","userdata","GetUser","toString","post","then","response","alert","catch","err","parseJwt","JsonRegister","user","email","name","given_name","lastname","family_name","user_type","jsonPayload","decodeToken","userData","get","GetEmpresa","val","finally","setSelected","e","console","log","token","localStorage","getItem","base64Url","split","base64","replace","decodeURIComponent","window","atob","map","c","charCodeAt","slice","join","JSON","parse"],"sources":["R:\\Agus\\Facultad\\TFI 5to\\healthchain-front\\src\\views\\seleccionEmpresaUser.vue"],"sourcesContent":["<template>\r\n  <form class=\"form\">\r\n      <v-text-field\r\n        v-model=\"cuit\"\r\n        :counter=\"10\"\r\n        label=\"Cuit\"\r\n      ></v-text-field>\r\n\r\n      <v-btn variant=\"outlined\" @click=\"GetEmpresa()\">Buscar empresa</v-btn>\r\n  </form>\r\n\r\n  <form class=\"form\" v-if=\"validacionCuit\">\r\n      <v-text-field\r\n        v-model=\"jsonEmpresa.nombre_empresa\"\r\n      ></v-text-field>\r\n  \r\n      <v-text-field\r\n        v-model=\"jsonEmpresa.direccion_empresa\"\r\n      ></v-text-field>\r\n\r\n      <v-select\r\n          v-model=\"this.Rolselect\"\r\n          :items=\"this.jsonRol\"\r\n          item-title=\"Rol\"\r\n          item-value=\"id\"\r\n          label=\"Seleccionar Rol\"\r\n          @change=\"this.Rolselect\"\r\n        ></v-select>\r\n\r\n      <v-text-field\r\n        label=\"Motivo\"\r\n        v-model=\"jsonSolicitud.descripcion\"\r\n      ></v-text-field>\r\n      <div>\r\n        <v-btn\r\n        class=\"me-4\"\r\n        type=\"submit\"\r\n        @click=\"Solicitud()\"\r\n      >\r\n        submit\r\n      </v-btn>\r\n      </div>  \r\n    </form>\r\n</template>\r\n  <script>\r\nimport axios from 'axios';\r\n    export default{\r\n      data(){\r\n        return{\r\n          validacionCuit: false,\r\n          cuit: null,\r\n          Rolselect: null,\r\n          jsonEmpresa: {\r\n            nombre_empresa:\"\",\r\n            direccion_empresa: \"\",\r\n          },\r\n          jsonRol: [\r\n            {id: '1', Rol: 'Empleado Administrador'},\r\n            {id: '2', Rol: 'Empleado Financiero'},\r\n            {id: '3', Rol: 'Empleado Monitor'}\r\n          ],\r\n          jsonSolicitud:{\r\n            cuit_empresa: null,\r\n            id_usuario: null,\r\n            tipo_Solicitud: {\r\n              id: \"2\",\r\n            },\r\n            descripcion: null,\r\n            estado: \"1\",\r\n          }\r\n        }\r\n        \r\n      },\r\n    methods: {\r\n            Solicitud(){\r\n              const status = this.RegisterEmployee();\r\n              if(status == 200){\r\n                const userdata = this.GetUser();\r\n                this.jsonSolicitud.id_usuario = userdata.id_usuario.toString()\r\n                this.jsonSolicitud.cuit_empresa = this.cuit.toString()\r\n                axios.post(\"https://localhost:7274/api/Solicitud/RegisterSolicitud\", this.jsonSolicitud)\r\n                .then(response=>{\r\n                  if(response.status == 200)\r\n                    alert(\"Solicitud enviado con exito\")\r\n                })\r\n                .catch(err =>{\r\n                  alert(err.data)\r\n                })\r\n              }\r\n            },\r\n            RegisterEmployee(){\r\n              const userdata = parseJwt()\r\n              const JsonRegister = {\r\n                user: userdata.email.toString(),\r\n                name: userdata.given_name.toString(),\r\n                lastname: userdata.family_name.toString(),\r\n                user_type: \"2\"\r\n              }\r\n              axios.post(\"https://localhost:7151/api/User/RegisterUser\", JsonRegister)\r\n              .then(response=>{\r\n                return response.status\r\n              })\r\n              .catch(err =>{\r\n                alert(err.data)\r\n              })\r\n            },\r\n            GetUser(){\r\n              const jsonPayload = decodeToken();\r\n              const userData = [];\r\n              axios.get(\"https://localhost:7151/api/User/ValidateUser/\" + jsonPayload.email.toString())\r\n                      .then(response=>{\r\n                        this.userData = response.data;\r\n                      })\r\n                      .catch(err =>{\r\n                        alert(err.data)\r\n                      })\r\n              return userData;\r\n            },\r\n            GetEmpresa(){\r\n              val = false;\r\n              if(this.cuit == null){\r\n                alert(\"Debe completar el cuit de la empresa a buscar\")\r\n              }\r\n              else{\r\n                axios.get(\"https://localhost:7227/api/Empresa/GetOneEmpresa/\" + this.cuit.toString())\r\n                .then(response=>{\r\n                  this.jsonEmpresa = response.data;\r\n                  if(response.status==200){\r\n                    val = true;\r\n                  }else{\r\n                    val = false;\r\n                  }\r\n                })\r\n                .catch(err =>{\r\n                  alert(err.data)\r\n                  val = false;\r\n                })\r\n                .finally(data =>{\r\n                  this.validacionCuit = val;\r\n                })\r\n              }\r\n            },\r\n            setSelected(e){\r\n              console.log(e)\r\n              this.Rol = e\r\n            },\r\n            parseJwt () {\r\n            const token = localStorage.getItem('id_token')\r\n            const base64Url = token.split('.')[1];\r\n            const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n            const jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function(c) {\r\n            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n            }).join(''));\r\n            return JSON.parse(jsonPayload)\r\n            },\r\n          }\r\n      }\r\n  </script>\r\n  <style>\r\n    .form{\r\n        margin-top: 20px;\r\n        margin-left: 20%;\r\n        margin-right: 20%;\r\n        justify-content: space-around;\r\n        align-items: center;\r\n    }\r\n  </style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}